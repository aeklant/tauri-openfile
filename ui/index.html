<html>
  <div>
    <button onclick="openDialog()">Open File</button>
    <button onclick="saveDialog()">Save File</button>
  </div>

  <textarea id="contents"></textarea>

  <script>
    const invoke = window.__TAURI__.core.invoke;
    const listen = window.__TAURI__.event.listen;

    async function openDialog() {
      await invoke("open_file");
    }

    async function saveDialog() {
      let contents = document.querySelector("#contents").value;
      await invoke("save_file", { contents });
    }

    function init_listeners() {
      listen("file_saved", data => {});
      listen("file_loaded", data => {
        document.querySelector("#contents").value = data.payload;
      });
    }

    init_listeners();
  </script>
</html>
